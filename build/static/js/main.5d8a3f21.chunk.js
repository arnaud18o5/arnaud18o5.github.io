(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var i=n(8),a=n(24),s=n.n(a),c=(n(44),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))}),l=n(70),r=n(10),o=(n(45),n(46),n(47),n(25)),d=n.n(o),b=n(0);var u=function(e){var t="",n="";return Object(b.jsx)("div",{class:"modal fade",id:"Sign-Up-Modal","aria-hidden":"true","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1",children:Object(b.jsx)("div",{class:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{class:"modal-content",children:[Object(b.jsxs)("div",{class:"modal-header",children:[Object(b.jsx)("h5",{class:"modal-title",id:"exampleModalToggleLabel",children:"Create a new account"}),Object(b.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(b.jsxs)("div",{class:"modal-body",children:[Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"@"}),Object(b.jsx)("input",{type:"text",onChange:function(e){return t=e.target.value},class:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Password"}),Object(b.jsx)("input",{type:"password",onChange:function(e){return n=e.target.value},class:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("button",{type:"submit",onClick:function(){e.handleRegistration(t,n),console.log("click sur sign up")},class:"btn btn-primary justify-content-center","data-bs-dismiss":"modal",children:"Sign-Up"})})]})]})})})};function j(e){new d.a.Modal(document.getElementById(e),{keyboard:!1}).show()}var h=function(e){var t="",n="",a=Object(i.useState)(e.cookies),s=Object(r.a)(a,2),c=s[0],l=s[1],o=Object(i.useState)(e.isLogged),d=Object(r.a)(o,2),h=d[0],p=d[1];function g(){fetch("https://lauriari-arvr.azurewebsites.net/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){return e.json()})).then((function(n){return function(n){e.handleCookie("true","token",n.message,{path:"/"}),e.handleCookie("true","username",t,{path:"/"}),e.handleCookie("true","isLogged","true",{path:"/"}),p("true")}(n)})).catch((function(e){j("Sign-In-Modal-Error")})),e.handleLoging("Loading")}return console.log(e.logged),Object(i.useEffect)((function(){if(null!==e.cookies.username&&void 0!==e.cookies.username){console.log("isLogged \xe0 true");var t=e.cookies;t.isLogged="true",l(t)}else p(e.cookies.isLogged)}),[e.cookies,t]),Object(i.useEffect)((function(){if(null===c){var t=new Object;t.isLogged="false",l(t)}else p(e.cookies.isLogged)}),[c]),console.log("isLogged = "+h),"true"===h?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("nav",{class:"navbar bg-dark",children:[Object(b.jsxs)("div",{class:"left-buttons d-flex justify-content-start",children:[Object(b.jsx)("a",{class:"navbar-brand",style:{width:"8%",margin:"0"},href:"#",children:Object(b.jsx)("img",{src:"/logo.jpg",alt:"",width:"100%",class:"d-inline-block align-text-top"})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("home")},class:"btn btn-link nav-link active text-light fs-5",children:"Home"})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("workspace")},class:"btn btn-link nav-link text-light fs-5",children:"My Workspace"})})]}),Object(b.jsx)("div",{className:"right-buttons d-flex justify-content-end",children:Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){e.handleCookie("false","token"),e.handleCookie("false","username"),e.handleCookie("true","isLogged","false",{path:"/"}),p("false")},children:c.username})})]})}):"false"===h?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("nav",{class:"navbar bg-dark",children:[Object(b.jsxs)("div",{class:"left-buttons d-flex justify-content-start",children:[Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("home")},class:"btn btn-link nav-link active text-light fs-5",children:Object(b.jsx)("img",{src:"./public/logo.jpg",alt:""})})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("home")},class:"btn btn-link nav-link active text-light fs-5",children:"Home"})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("workspace")},class:"btn btn-link nav-link text-light fs-5",children:"My Workspace"})})]}),Object(b.jsxs)("div",{className:"right-buttons d-flex justify-content-end",children:[Object(b.jsx)("div",{className:"p-2 bd-highlight",children:Object(b.jsx)("button",{class:"btn btn-outline-light",onClick:function(){return j("Sign-In-Modal")},children:"Login"})}),Object(b.jsx)("div",{className:"p-2 bd-highlight",children:Object(b.jsx)("button",{class:"btn btn-warning",onClick:function(){return j("Sign-Up-Modal")},children:"Sign-Up"})})]})]}),Object(b.jsx)(u,{handleRegistration:function(e,i){t=e,n=i,fetch("https://lauriari-arvr.azurewebsites.net/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:i,contentManager:1})}).then((function(e){g()}))}}),Object(b.jsx)("div",{class:"modal fade",id:"Sign-In-Modal","aria-hidden":"true","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1",children:Object(b.jsx)("div",{class:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{class:"modal-content",children:[Object(b.jsxs)("div",{class:"modal-header",children:[Object(b.jsx)("h5",{class:"modal-title",id:"exampleModalToggleLabel",children:"Login to your account"}),Object(b.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(b.jsxs)("div",{class:"modal-body",children:[Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"@"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t=e.target.value},placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Password"}),Object(b.jsx)("input",{type:"password",class:"form-control",onChange:function(e){return n=e.target.value},placeholder:"Password","aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("button",{type:"submit",class:"btn btn-primary justify-content-center","data-bs-dismiss":"modal",onClick:function(){return g()},children:"Sign-In"})})]})]})})}),Object(b.jsx)("div",{class:"modal fade",id:"Sign-In-Modal-Error","aria-hidden":"true","aria-labelledby":"exampleModalToggleLabel",tabindex:"-1",children:Object(b.jsx)("div",{class:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{class:"modal-content",children:[Object(b.jsxs)("div",{class:"modal-header",children:[Object(b.jsx)("h5",{class:"modal-title",id:"exampleModalToggleLabel",children:"Login to your account"}),Object(b.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(b.jsxs)("div",{class:"modal-body",children:[Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Username"}),Object(b.jsx)("input",{type:"text",class:"form-control is-invalid",onChange:function(e){return t=e.target.value},id:"validationServerUsername","aria-describedby":"inputGroupPrepend3 validationServerUsernameFeedback",required:!0}),Object(b.jsx)("div",{id:"validationServerUsernameFeedback",class:"invalid-feedback",children:"Enter your username again."})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Password"}),Object(b.jsx)("input",{type:"password",class:"form-control is-invalid",onChange:function(e){return n=e.target.value},id:"validationServerUsername","aria-describedby":"inputGroupPrepend3 validationServerUsernameFeedback",required:!0}),Object(b.jsx)("div",{id:"validationServerUsernameFeedback",class:"invalid-feedback",children:"Enter your password again."})]}),Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("button",{type:"submit",class:"btn btn-primary justify-content-center","data-bs-dismiss":"modal",onClick:function(){return g()},children:"Sign-In"})})]})]})})})]}):(p("false"),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("nav",{class:"navbar bg-dark",children:[Object(b.jsxs)("div",{class:"left-buttons d-flex justify-content-start",children:[Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("home")},class:"btn btn-link nav-link active text-light fs-5",children:Object(b.jsx)("img",{src:"./public/logo.jpg",alt:""})})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("home")},class:"btn btn-link nav-link active text-light fs-5",children:"Home"})}),Object(b.jsx)("div",{class:"link p-2 bd-highlight",children:Object(b.jsx)("button",{onClick:function(){return e.handlePage("workspace")},class:"btn btn-link nav-link text-light fs-5",children:"My Workspace"})})]}),Object(b.jsx)("div",{className:"right-buttons d-flex justify-content-end",children:Object(b.jsx)("div",{class:"spinner-border text-light",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]})}))},p=n(71),g=n(9),f=n(14);n(60);function m(e){var t=Object(i.useState)(null),n=Object(r.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(null),l=Object(r.a)(c,2),o=l[0],d=l[1];return Object(i.useEffect)((function(){if(console.log("useEffect itemlist changed"),null!==e.items){var t=e.items;t.map((function(e){e!==o&&(e.classN="list-group-item list-group-item-action")})),s(t)}}),[e]),Object(i.useEffect)((function(){console.log("change item in item list"),null!==o&&a.map((function(t){"list-group-item list-group-item-action active"===t.classN&&(e.changeItem(t),console.log("click on an item"))}))}),[a]),null!==a?Object(b.jsx)("div",{className:" card w-25 p-3 h-75 start-0",style:{padding:"0"},children:Object(b.jsxs)("div",{class:"list-group w-100",style:{margin:"0"},children:[Object(b.jsxs)("div",{className:"list-group-item gray-400 d-flex justify-content-between align-items-center ",children:["My items : ",Object(b.jsx)("button",{class:"btn btn-sm btn-secondary",onClick:e.addItem,children:"+"})]}),a.map((function(t){return Object(b.jsx)("button",{class:t.classN,"aria-current":"true",onClick:function(){return function(e){var t=a.map((function(t){return t._id===e?Object(f.a)(Object(f.a)({},t),{},{classN:"list-group-item list-group-item-action active"}):Object(f.a)(Object(f.a)({},t),{},{classN:"list-group-item list-group-item-action"})}));a.map((function(t){t._id===e&&d(a)})),s(t)}(t._id)},children:Object(b.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center ",style:{borderWidth:"0",backgroundColor:"transparent"},children:[t.name,Object(b.jsx)("button",{class:"btn btn-danger btn-sm position-absolute top-25 end-0",onClick:function(){return e.deleteItem(t._id)},children:"X"})]})})}))]})}):Object(b.jsx)("p",{children:"Rien a afficher"})}var x=n(13),O=n(37),v=(n(62),function e(){var t=0,n=document.createElement("div");function i(e){return n.appendChild(e.dom),e}function a(e){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),a(++t%n.children.length)}),!1);var s=(performance||Date).now(),c=s,l=0,r=i(new e.Panel("FPS","#0ff","#002")),o=i(new e.Panel("MS","#0f0","#020"));if(window.self.performance&&window.self.performance.memory)var d=i(new e.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:n,addPanel:i,showPanel:a,begin:function(){s=(performance||Date).now()},end:function(){l++;var e=(performance||Date).now();if(o.update(e-s,200),e>=c+1e3&&(r.update(1e3*l/(e-c),100),c=e,l=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){s=this.end()},domElement:n,setMode:a}});v.Panel=function(e,t,n){var i=1/0,a=0,s=Math.round,c=s(window.devicePixelRatio||1),l=80*c,r=48*c,o=3*c,d=2*c,b=3*c,u=15*c,j=74*c,h=30*c,p=document.createElement("canvas");p.width=l,p.height=r,p.style.cssText="width:80px;height:48px";var g=p.getContext("2d");return g.font="bold "+9*c+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,l,r),g.fillStyle=t,g.fillText(e,o,d),g.fillRect(b,u,j,h),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(b,u,j,h),{dom:p,update:function(r,f){i=Math.min(i,r),a=Math.max(a,r),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,l,u),g.fillStyle=t,g.fillText(s(r)+" "+e+" ("+s(i)+"-"+s(a)+")",o,d),g.drawImage(p,b+c,u,j-c,h,b,u,j-c,h),g.fillRect(b+j-c,u,c,h),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(b+j-c,u,c,s((1-r/f)*h))}}};var y=n(38),w=n(3);function C(e){var t=Object(i.useRef)(null),n=Object(i.useState)(!1),a=Object(r.a)(n,2);a[0],a[1];return Object(i.useEffect)((function(){var n=new x.Scene;n.background=new x.Color(16777215);var i=new x.Raycaster,a=new x.Vector2,s=0,c=0,l=0,r=new x.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.z=20;var o=new x.WebGLRenderer;o.setSize(.3*window.innerWidth,.3*window.innerHeight),t.current.appendChild(o.domElement);var d=new y.a(r,o.domElement);d.enableDamping=!0,(new O.a).load("https://lauriaristorage.blob.core.windows.net/"+e.link,(function(e){e.scene.name="gltf";(new x.Box3).setFromObject(e.scene);n.add(e.scene)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log(e)}));var b=new x.SphereGeometry(1,1),u=new x.MeshStandardMaterial({color:16777215}),j=new x.Mesh(b,u);j.name="intersection",new x.PointLight(16777215).position.set(0,0,0);var h=new x.AmbientLight(16777215);function p(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),o.setSize(.3*window.innerWidth,.3*window.innerHeight),g()}function g(){i.setFromCamera(a,r);new w.Q;for(var d=i.intersectObjects(n.children),b=0;b<d.length;b++){var u=d[b].object.material.clone();u.transparent=!1,u.opacity=.5,d[b].object.material=u,2===b&&(s=d[2].point.x,c=d[2].point.y,l=d[2].point.z)}window.addEventListener("click",(function(n){if(null!==t.current){var i=t.current.getBoundingClientRect();if(n.clientX>i.x&&n.clientX<i.x+i.width&&n.clientY>i.y&&n.clientY<i.y+i.height){var a=j.position;e.click(a.x,a.y,a.z)}}}),!1),j.position.set(s,c,l),n.add(j),o.render(n,r)}function p(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight),g()}h.intensity=5,n.add(h),window.addEventListener("resize",p,!1),window.addEventListener("pointermove",(function(e){if(null!==t.current){var n=t.current.getBoundingClientRect();e.clientX>n.x&&e.clientX<n.x+n.width&&e.clientY>n.y&&e.clientY<n.y+n.height&&(a.x=(e.clientX-n.x)/n.width*2-1,a.y=-(e.clientY-n.y)/n.height*2+1)}})),window.addEventListener("resize",p,!1),function e(){requestAnimationFrame(e),d.update(),g()}()}),[]),Object(b.jsx)("div",{ref:t,style:{cursor:"none"},id:"3d"})}function k(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"card",style:{width:"20%"},children:Object(b.jsxs)("div",{class:"accordion",id:"accordionExample",children:[Object(b.jsx)("div",{className:"list-group-item gray-400 d-flex justify-content-between align-items-center ",children:"Points of interest of the item :"}),e.pois.map((function(t){return Object(b.jsxs)("div",{class:"accordion-item",children:[Object(b.jsx)("h2",{class:"accordion-header",id:"headingOne",children:Object(b.jsxs)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e.pois.indexOf(t),"aria-expanded":"true","aria-controls":"collapse"+e.pois.indexOf(t),children:[Object(b.jsx)("img",{style:{width:"10%"},src:"https://lauriaristorage.blob.core.windows.net/"+t.poiImage}),"   ",t.name]})}),Object(b.jsx)("div",{id:"collapse"+ +e.pois.indexOf(t),class:"accordion-collapse collapse show","aria-labelledby":"heading"+e.pois.indexOf(t),"data-bs-parent":"#accordionExample",children:Object(b.jsxs)("div",{class:"accordion-body",children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Description : "}),t.description]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Category : "}),t.category]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Location : "}),t.latitude," ; ",t.longitude]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Position : "}),"x: ",t.mapCoordinates.x," ; y: ",t.mapCoordinates.y," ; z: ",t.mapCoordinates.z]})]})})]})}))]})})})}function S(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(e.data),l=Object(r.a)(c,2),o=l[0],d=l[1];return Object(i.useEffect)((function(){0===o&&(d(e.data),console.log("probleme"))}),[o]),a?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"d-flex align-self-center",children:[Object(b.jsxs)("div",{className:"d-flex flex-column bd-highlight mb-3",children:[Object(b.jsx)("h5",{children:e.detail}),Object(b.jsx)("input",{type:"text",placeholder:e.data,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{class:"btn btn-secondary btn-sm",onClick:function(){e.editItem(e.id,o,e.detail),s(!1)},children:"Validate"})})]})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"d-flex flex-row mb-3",children:[Object(b.jsxs)("div",{className:"d-flex flex-column bd-highlight mb-3",children:[Object(b.jsx)("h5",{children:e.detail}),Object(b.jsx)("p",{children:o})]}),Object(b.jsx)("button",{class:"btn btn-secondary btn-sm",onClick:function(){return s(!0)},children:"Edit"})]})})}var I=function(e){var t=new function(){this.name="",this.description="",this.latitude="",this.longitude="",this.category="",this.file=null,this.gltfFile=null,this.binFile=null,this.textureFiles=null,this.logoImageReference=null},n=new function(){this.avatar=null,this.name="",this.description="",this.category="",this.latitude="",this.longitude="",this.x="0",this.y="0",this.z="0"},a="",s=Object(i.useState)(null),c=Object(r.a)(s,2),l=c[0],o=c[1],d=Object(i.useState)(null),u=Object(r.a)(d,2),j=u[0],h=u[1],p=Object(i.useState)(null),x=Object(r.a)(p,2),O=x[0],v=x[1],y=Object(i.useState)("noChoice"),w=Object(r.a)(y,2),I=w[0],L=w[1],F=Object(i.useState)(!1),z=Object(r.a)(F,2),E=z[0],P=z[1],T=Object(i.useState)({x:"0",y:"0",z:"0"}),D=Object(r.a)(T,2),N=D[0],A=D[1];function R(){fetch("https://lauriari-arvr.azurewebsites.net/aritem/contentmanager",{method:"GET",headers:{Authorization:"Bearer "+e.cookies.token}}).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return o(null),void h(null)}))}function U(){v("uploadingItem");var n=new FormData;if(n.append("name",a),n.append("description",t.description),n.append("category",t.category),n.append("latitude",t.latitude),n.append("longitude",t.longitude),"2D"===I)n.append("avatar",t.file),fetch("https://lauriari-arvr.azurewebsites.net/aritem/",{method:"POST",headers:{Authorization:"Bearer "+e.cookies.token},body:n}).then((function(e){return e.json()})).then((function(e){"Uploaded item to Azure and updated DB\ud83e\udd17"===e.message?(v("noItemSelected"),R()):v("newItem")}));else if("3D"===I){Object(f.a)(Object(f.a)({},t.gltfFile),{},{type:"model/gltf+json"}),Object(f.a)(Object(f.a)({},t.binFile),{},{type:"octet-stream"});n.append("gltf",t.gltfFile),n.append("bin",t.binFile),n.append("logoImageReference",t.logoImageReference),null!==t.textureFiles?Array.from(t.textureFiles).forEach((function(e){n.append("imageGallery",e,e.name)})):n.append("imageGallery",void 0),(new Headers).append("Authorization","Bearer "+e.cookies.token);var i={method:"POST",headers:{Authorization:"Bearer "+e.cookies.token},body:n,mode:"cors"};fetch("https://lauriari-arvr.azurewebsites.net/aritem/3d",i).then((function(e){return e.json()})).then((function(e){"Uploaded item to Azure and updated DB\ud83e\udd17"===e.message?(v("noItemSelected"),R()):v("newItem")}))}}function M(t){var n={method:"DELETE",headers:{Authorization:"Bearer "+e.cookies.token}};fetch("https://lauriari-arvr.azurewebsites.net/aritem/delete/"+t,n).then((function(e){R()}))}function B(e){L("2"===e?"3D":"1"===e?"2D":"noChoice")}function H(e){h(e)}function W(){v("newItem")}function J(e,t,i){n.x=e.toString(),n.y=t.toString(),n.z=i.toString(),A({x:e.toString(),y:(t+2).toString(),z:i.toString()}),console.log(N.x,N.y,N.z)}Object(i.useEffect)((function(){e.cookies,"true"===e.logged&&R()}),[e]),Object(i.useEffect)((function(){})),Object(i.useEffect)((function(){v("ItemSelected")}),[j]),Object(i.useEffect)((function(){null!==l&&"newItem"!==O&&v("noItemSelected"),console.log("data changed ")}),[l]);var V=function(t,n,i){var a;"category"===i?a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.cookies.token},body:JSON.stringify({category:n})}:"description"===i?a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.cookies.token},body:JSON.stringify({description:n})}:"name"===i?a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.cookies.token},body:JSON.stringify({name:n})}:"longitude"===i?a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.cookies.token},body:JSON.stringify({longitude:n})}:"latitude"===i&&(a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.cookies.token},body:JSON.stringify({latitude:n})}),fetch("https://lauriari-arvr.azurewebsites.net/aritem/update/"+t+"?param="+i,a).then((function(e){return e.json()})).then((function(e){return e.message==="Updated "+i?(console.log("changement bien effectue"),e):0}))};return"false"===e.logged?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("p",{children:"You have to be connected to see your workspace. test"})}):"Loading"===e.logged?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{class:"spinner-border",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):null!==j&&"ItemSelected"===O?1!=E?Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 5% 1%"},children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsxs)("div",{class:"card w-50",style:{padding:"2%"},children:[Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{padding:"0 0 5% 0"},children:[Object(b.jsx)("img",{src:"https://lauriaristorage.blob.core.windows.net/"+j.logoImageReference,style:{width:"5%",margin:"0 2% 0 0"},alt:""}),Object(b.jsx)("h2",{children:j.name})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",style:{padding:"5%"},children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(S,{editItem:V,data:j.description,id:j._id,detail:"description"}),Object(b.jsx)(S,{editItem:V,data:j.latitude,id:j._id,detail:"latitude"}),Object(b.jsx)(S,{editItem:V,data:j.longitude,id:j._id,detail:"longitude"}),Object(b.jsx)(S,{editItem:V,data:j.category,id:j._id,detail:"category"}),Object(b.jsx)("p",{children:"QR Code for your items"}),Object(b.jsxs)("div",{class:"d-flex flex-column align-items-center",children:[Object(b.jsx)("img",{src:j.QRCode,alt:""}),Object(b.jsx)("a",{href:j.QRCode,download:j.name,children:Object(b.jsx)("button",{class:"btn btn-secondary btn-sm",children:"Download me"})})]})]}),Object(b.jsx)(C,{link:j.objectReference,click:J})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(b.jsx)("button",{class:"btn btn-primary",style:{margin:"0 1% 0 0"},onClick:function(){return P(!0)},children:"Add a point of interest to your item"}),Object(b.jsx)("button",{class:"btn btn-secondary",onClick:function(){return console.log("click")},children:"Edit the item"})]})]}),Object(b.jsx)(k,{pois:j.pois})]}):Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 0 1%"},children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsxs)("div",{class:"card w-50",style:{padding:"2%"},children:[Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{padding:"0 0 5% 0"},children:[Object(b.jsx)("img",{src:"https://lauriaristorage.blob.core.windows.net/"+j.logoImageReference,style:{width:"5%",margin:"0 2% 0 0"},alt:""}),Object(b.jsx)("h2",{children:j.name})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",style:{padding:"0 0 5% 0"},children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h5",{children:"Description :"}),Object(b.jsx)("p",{children:j.description}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Location: "}),j.latitude," ; ",j.longitude]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Category: "}),j.category]}),Object(b.jsx)("p",{children:"QR Code for your items"}),Object(b.jsxs)("div",{class:"d-flex flex-column align-items-center",children:[Object(b.jsx)("img",{src:j.QRCode,alt:""}),Object(b.jsx)("a",{href:j.QRCode,download:j.name,children:Object(b.jsx)("button",{class:"btn btn-secondary btn-sm",children:"Download me"})})]})]}),Object(b.jsx)(C,{link:j.objectReference,click:J})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose a logo for the point of interest."}),Object(b.jsx)("input",Object(g.a)({class:"form-control",id:"file-input",onChange:function(e){return n.avatar=e.target.files[0]},placeholder:"Choose a file",type:"file"},"onChange",(function(e){return t.file=e.target.files[0]})))]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Name"}),Object(b.jsx)("input",{type:"text",class:"form-control",placeholder:"Name of the point of interest",onChange:function(e){return n.name=e.target.value},"aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Description"}),Object(b.jsx)("textarea",{class:"form-control","aria-label":"With textarea",onChange:function(e){return n.description=e.target.value}})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Category"}),Object(b.jsx)("input",{type:"text",class:"form-control",placeholder:"Category of the point of interest",onChange:function(e){return n.category=e.target.value},"aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Latitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",placeholder:"Latitude of the point of interest",onChange:function(e){return n.latitude=e.target.value},"aria-label":"Username","aria-describedby":"basic-addon1"}),Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Longitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",placeholder:"Longitude of the point of interest",onChange:function(e){return n.longitude=e.target.value},"aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"X Value"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return n.x=e.target.value},placeholder:"X Value",value:N.x,"aria-label":"Username","aria-describedby":"basic-addon1"}),Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Y Value"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return n.y=e.target.value},placeholder:"Y Value",value:N.y,"aria-label":"Username","aria-describedby":"basic-addon1"}),Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Z Value"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return n.z=e.target.value},placeholder:"Z Value",value:N.z,"aria-label":"Username","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"d-flex flex-row-reverse bd-highlight",children:[Object(b.jsx)("button",{class:"btn btn-primary",style:{margin:"0 0 0 1%"},onClick:function(){return function(t){var i=new FormData;i.append("avatar",n.avatar),i.append("name",n.name),i.append("description",n.description),i.append("category",n.category),i.append("latitude",n.latitude),i.append("longitude",n.longitude),i.append("x",N.x),i.append("y",N.y),i.append("z",N.z),console.log(n.x,n.y,n.z);var a={method:"POST",headers:{Authorization:"Bearer "+e.cookies.token},body:i,redirect:"follow"};fetch("https://lauriari-arvr.azurewebsites.net/aritem/pois/"+t,a).then((function(e){return e.json()})).then((function(e){"Added a new point of interest!"===e.message?(P(!1),R()):console.log("add a toaster : error pois")})).catch((function(e){return console.log("error",e)}))}(j._id)},children:"Add the point of interest"}),Object(b.jsx)("button",{class:"btn btn-warning ",onClick:function(){return P(!1)},children:"Cancel"})]})]}),Object(b.jsx)(k,{pois:j.pois}),"/*"]}):"noItemSelected"===O?Object(b.jsx)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 0 1%"},children:Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W})}):"newItem"!==O?"uploadingItem"===O?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsx)("div",{class:"spinner-border",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{class:"spinner-border",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}):"noChoice"===I?Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 0 1%"},children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsxs)("div",{class:"card w-50",style:{padding:"5%"},children:[Object(b.jsx)("h3",{children:"Add new Item"}),Object(b.jsxs)("select",{class:"form-select","aria-label":"Default select example",onChange:function(e){return B(e.target.value)},children:[Object(b.jsx)("option",{value:"0",children:"Choose the type of your new Item"}),Object(b.jsx)("option",{value:"1",children:"2D Item"}),Object(b.jsx)("option",{value:"2",children:"3D Item"})]})]})]}):"2D"===I?(console.log("2D click"),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 0 1%"},children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsx)("div",{class:"card w-50",style:{padding:"5%"},children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("h3",{children:"Add new Item"}),Object(b.jsxs)("select",{class:"form-select mb-3","aria-label":"Default select example",onChange:function(e){return B(e.target.value)},children:[Object(b.jsx)("option",{value:"1",selected:!0,children:"2D Item"}),Object(b.jsx)("option",{value:"2",children:"3D Item"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Title"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return a=e.target.value},placeholder:"Title","aria-label":"Title","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",children:"Description"}),Object(b.jsx)("textarea",{class:"form-control",onChange:function(e){return t.description=e.target.value},"aria-label":"Description"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Latitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.latitude=e.target.value},placeholder:"Latitude","aria-label":"Latitude","aria-describedby":"basic-addon1"}),Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Longitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.longitude=e.target.value},placeholder:"Longitude","aria-label":"Longitude","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Category"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.category=e.target.value},placeholder:"Category","aria-label":"Category","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose a file for your 2D item."}),Object(b.jsx)("input",{class:"form-control",id:"file-input",placeholder:"Choose a file",type:"file",onChange:function(e){return t.file=e.target.files[0]}})]}),Object(b.jsx)("button",{type:"submit",class:"btn btn-primary",onClick:U,children:"Upload"})]})})]})})):"3D"===I?(console.log("3d click"),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{class:"d-flex justify-content-start",style:{margin:"1% 0 0 1%"},children:[Object(b.jsx)(m,{items:l,deleteItem:M,changeItem:H,addItem:W}),Object(b.jsx)("div",{class:"card w-50",style:{padding:"5%"},children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("h3",{children:"Add new Item"}),Object(b.jsxs)("select",{class:"form-select mb-3","aria-label":"Default select example",onChange:function(e){return B(e.target.value)},children:[Object(b.jsx)("option",{value:"1",children:"2D Item"}),Object(b.jsx)("option",{value:"2",selected:!0,children:"3D Item"})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose a logo for your item."}),Object(b.jsx)("input",{class:"form-control",placeholder:"Choose a file",accept:"",type:"file",onChange:function(e){return t.logoImageReference=e.target.files[0]}})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Title"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return a=e.target.value},placeholder:"Title","aria-label":"Title","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",children:"Description"}),Object(b.jsx)("textarea",{class:"form-control",onChange:function(e){return t.description=e.target.value},"aria-label":"Description"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Latitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.latitude=e.target.value},placeholder:"Latitude","aria-label":"Latitude","aria-describedby":"basic-addon1"}),Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Longitude"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.longitude=e.target.value},placeholder:"Longitude","aria-label":"Longitude","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"input-group mb-3",children:[Object(b.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Category"}),Object(b.jsx)("input",{type:"text",class:"form-control",onChange:function(e){return t.category=e.target.value},placeholder:"Category","aria-label":"Category","aria-describedby":"basic-addon1"})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose a GLTF file."}),Object(b.jsx)("input",{class:"form-control",placeholder:"Choose a file",accept:".gltf",type:"file",onChange:function(e){return t.gltfFile=e.target.files[0]}})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose a BIN file."}),Object(b.jsx)("input",{class:"form-control",placeholder:"Choose a file",accept:".bin",type:"file",onChange:function(e){return t.binFile=e.target.files[0]}})]}),Object(b.jsxs)("div",{class:"mb-3",children:[Object(b.jsx)("label",{for:"formFile",class:"form-label",children:"Choose the textures files."}),Object(b.jsx)("input",{class:"form-control",id:"file-input",placeholder:"Choose a file",type:"file",multiple:!0,onChange:function(e){return t.textureFiles=e.target.files}})]}),Object(b.jsx)("button",{type:"submit",class:"btn btn-primary",onClick:U,children:"Upload"})]})})]})})):void 0};n(65);function L(){var e=Object(p.a)(["user"]),t=Object(r.a)(e,3),n=t[0],a=t[1],s=t[2],c=Object(i.useState)("false"),l=Object(r.a)(c,2),o=l[0],d=l[1],u=Object(i.useState)(),j=Object(r.a)(u,2);j[0],j[1];return Object(i.useEffect)((function(){void 0===n.username?d("false"):d("true")})),Object(i.useEffect)((function(){}),[o,n]),Object(i.useEffect)((function(){console.log(n.username),console.log(o)}),[o]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{handleLoging:function(e){d(e)},logged:o,cookies:n,handleCookie:function(e,t,n,i){console.log("handle cookies"),"true"===e?(a(t,n,i),"isLogged"!==t||"false"!==n?d("true"):"isLogged"===t&&"false"===n&&d("false")):(s(t),d("false"))}}),Object(b.jsx)(I,{cookies:n,logged:o}),Object(b.jsx)("gltf-viewer",{interactive:!0,width:"300",height:"300",src:"../public/corridorFloor.gltf"}),Object(b.jsx)("img",{src:"../public/corridorFloor.gltf",alt:""})]})}s.a.render(Object(b.jsx)(l.a,{children:Object(b.jsx)(L,{})}),document.getElementById("header")),c()}},[[67,1,2]]]);
//# sourceMappingURL=main.5d8a3f21.chunk.js.map