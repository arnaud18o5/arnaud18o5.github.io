{"ast":null,"code":"import _slicedToArray from\"/Users/arnaudavocatgros/Documents/GitHub/arnaud18o5.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./Header.css';import'bootstrap/dist/css/bootstrap.min.css';import'jquery/dist/jquery.min.js';import bootstrap from'bootstrap/dist/js/bootstrap.min.js';import SignUpModal from\"./SignUpModal\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Header(props){var username=\"\";var password=\"\";var _useState=useState(props.cookies),_useState2=_slicedToArray(_useState,2),cookies=_useState2[0],setCookies=_useState2[1];var _useState3=useState(props.isLogged),_useState4=_slicedToArray(_useState3,2),isLogged=_useState4[0],setIsLogged=_useState4[1];console.log(props.logged);/*useEffect(()=>{\n    setCookies(props.cookies);\n    cook = props.cookies;\n    console.log(\"useeffect\");\n  }, [cookies]);*/ /*var cookies = props.cookies;\n  const [username, setUsername] = useState(props.cookies.username);\n  const [password, setPassword] = useState('');\n  const [logged, setLogged] = useState(props.cookies.isLogged);\n  console.log(\"cookies.isLogged.header = \" + props.cookies.isLogged);\n  console.log(\"logged const header = \" + logged);\n\n  \n  useEffect(() => {\n    if(props.cookies.isLogged !== logged){\n      setLogged(props.cookies.isLogged);\n    }\n    if(props.cookies !== cookies){\n      cookies = props.cookies;\n      setUsername(props.cookies.username);\n      setLogged(props.cookies.isLogged);\n    }\n    console.log(\"changement header = \" + logged);\n  })*/ /*useEffect(() => {\n    console.log(props.cookies)\n    if(props.cookies.isLogged === 'true'){\n      props.handleLoging('true');\n    }\n    else if(props.cookies.isLogged === 'false'){\n        props.handleLoging('false');\n    }\n  })*/useEffect(function(){if(props.cookies.username!==null&&props.cookies.username!==undefined){console.log(\"isLogged à true\");var updatedCookies=props.cookies;updatedCookies.isLogged='true';setCookies(updatedCookies);}else{setIsLogged(props.cookies.isLogged);}},[props.cookies,username]);useEffect(function(){if(cookies===null){var updatedCookies=new Object();// changer ca pour le faire a la fin du setcookies\nupdatedCookies.isLogged='false';setCookies(updatedCookies);}else{setIsLogged(props.cookies.isLogged);}},[cookies]);function login(){fetch(\"https://lauriari-arvr.azurewebsites.net/auth/login\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){return response.json();}).then(function(data){return cblogin(data);}).catch(function(error){wrongLogin(error);});props.handleLoging('Loading');}function register(u,p){username=u;password=p;fetch(\"https://lauriari-arvr.azurewebsites.net/auth/register\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,password:p,contentManager:1})}).then(function(response){login();});}function disconnect(){props.handleCookie('false','token');props.handleCookie('false','username');props.handleCookie('true','isLogged','false',{path:'/'});setIsLogged('false');//setCookies(null); // probleme de synchro ici \n//setLogged('false');\n}function cblogin(data){props.handleCookie('true','token',data.message,{path:'/'});props.handleCookie('true','username',username,{path:'/'});props.handleCookie('true','isLogged','true',{path:'/'});setIsLogged(\"true\");//setLogged('true');\n}function wrongLogin(error){showModal(\"Sign-In-Modal-Error\");}console.log(\"isLogged = \"+isLogged);if(isLogged==='true'){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"nav\",{class:\"navbar bg-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"left-buttons d-flex justify-content-start\",children:[/*#__PURE__*/_jsx(\"a\",{class:\"navbar-brand\",style:{width:\"8%\",margin:\"0\"},href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpg\",alt:\"\",width:\"100%\",class:\"d-inline-block align-text-top\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('home');},class:\"btn btn-link nav-link active text-light fs-5\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('workspace');},class:\"btn btn-link nav-link text-light fs-5\",children:\"My Workspace\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right-buttons d-flex justify-content-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:disconnect,children:cookies.username})})]})});}else if(isLogged==='false'){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{class:\"navbar bg-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"left-buttons d-flex justify-content-start\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('home');},class:\"btn btn-link nav-link active text-light fs-5\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./public/logo.jpg\",alt:\"\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('home');},class:\"btn btn-link nav-link active text-light fs-5\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('workspace');},class:\"btn btn-link nav-link text-light fs-5\",children:\"My Workspace\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-buttons d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-outline-light\",onClick:function onClick(){return showModal('Sign-In-Modal');},children:\"Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-warning\",onClick:function onClick(){return showModal('Sign-Up-Modal');},children:\"Sign-Up\"})})]})]}),/*#__PURE__*/_jsx(SignUpModal,{handleRegistration:register}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade\",id:\"Sign-In-Modal\",\"aria-hidden\":\"true\",\"aria-labelledby\":\"exampleModalToggleLabel\",tabindex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog modal-dialog-centered\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"modal-title\",id:\"exampleModalToggleLabel\",children:\"Login to your account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn-close\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"@\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",onChange:function onChange(e){return username=e.target.value;},placeholder:\"Username\",\"aria-label\":\"Username\",\"aria-describedby\":\"basic-addon1\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control\",onChange:function onChange(e){return password=e.target.value;},placeholder:\"Password\",\"aria-label\":\"Username\",\"aria-describedby\":\"basic-addon1\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary justify-content-center\",\"data-bs-dismiss\":\"modal\",onClick:function onClick(){return login(\"Sign-In-Modal\");},children:\"Sign-In\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade\",id:\"Sign-In-Modal-Error\",\"aria-hidden\":\"true\",\"aria-labelledby\":\"exampleModalToggleLabel\",tabindex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog modal-dialog-centered\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"modal-title\",id:\"exampleModalToggleLabel\",children:\"Login to your account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn-close\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control is-invalid\",onChange:function onChange(e){return username=e.target.value;},id:\"validationServerUsername\",\"aria-describedby\":\"inputGroupPrepend3 validationServerUsernameFeedback\",required:true}),/*#__PURE__*/_jsx(\"div\",{id:\"validationServerUsernameFeedback\",class:\"invalid-feedback\",children:\"Enter your username again.\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control is-invalid\",onChange:function onChange(e){return password=e.target.value;},id:\"validationServerUsername\",\"aria-describedby\":\"inputGroupPrepend3 validationServerUsernameFeedback\",required:true}),/*#__PURE__*/_jsx(\"div\",{id:\"validationServerUsernameFeedback\",class:\"invalid-feedback\",children:\"Enter your password again.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary justify-content-center\",\"data-bs-dismiss\":\"modal\",onClick:function onClick(){return login(\"Sign-In-Modal\");},children:\"Sign-In\"})})]})]})})})]});}else{setIsLogged('false');return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"nav\",{class:\"navbar bg-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"left-buttons d-flex justify-content-start\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('home');},class:\"btn btn-link nav-link active text-light fs-5\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./public/logo.jpg\",alt:\"\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('home');},class:\"btn btn-link nav-link active text-light fs-5\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"link p-2 bd-highlight\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handlePage('workspace');},class:\"btn btn-link nav-link text-light fs-5\",children:\"My Workspace\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right-buttons d-flex justify-content-end\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-light\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"visually-hidden\",children:\"Loading...\"})})})]})});}};function closeModal(modal){var myModal=new bootstrap.Modal(document.getElementById(modal),{keyboard:false});myModal.modal('hide');};function showModal(modal){var myModal=new bootstrap.Modal(document.getElementById(modal),{keyboard:false});myModal.show();}export default Header;","map":{"version":3,"sources":["/Users/arnaudavocatgros/Documents/GitHub/arnaud18o5.github.io/src/Header.js"],"names":["bootstrap","SignUpModal","React","useEffect","useState","Header","props","username","password","cookies","setCookies","isLogged","setIsLogged","console","log","logged","undefined","updatedCookies","Object","login","fetch","method","headers","body","JSON","stringify","then","response","json","data","cblogin","catch","error","wrongLogin","handleLoging","register","u","p","contentManager","disconnect","handleCookie","path","message","showModal","width","margin","handlePage","e","target","value","closeModal","modal","myModal","Modal","document","getElementById","keyboard","show"],"mappings":"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","sourcesContent":["import './Header.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'jquery/dist/jquery.min.js'\nimport bootstrap from 'bootstrap/dist/js/bootstrap.min.js'\nimport SignUpModal from \"./SignUpModal\"\nimport React, { useEffect,useState} from \"react\";\n\n\nfunction Header(props) { \n  var username = \"\";\n  var password = \"\";\n  const [cookies, setCookies] = useState(props.cookies);\n  const [isLogged, setIsLogged] = useState(props.isLogged);\n  console.log(props.logged)\n\n  /*useEffect(()=>{\n    setCookies(props.cookies);\n    cook = props.cookies;\n    console.log(\"useeffect\");\n  }, [cookies]);*/\n\n  /*var cookies = props.cookies;\n  const [username, setUsername] = useState(props.cookies.username);\n  const [password, setPassword] = useState('');\n  const [logged, setLogged] = useState(props.cookies.isLogged);\n  console.log(\"cookies.isLogged.header = \" + props.cookies.isLogged);\n  console.log(\"logged const header = \" + logged);\n\n  \n  useEffect(() => {\n    if(props.cookies.isLogged !== logged){\n      setLogged(props.cookies.isLogged);\n    }\n    if(props.cookies !== cookies){\n      cookies = props.cookies;\n      setUsername(props.cookies.username);\n      setLogged(props.cookies.isLogged);\n    }\n    console.log(\"changement header = \" + logged);\n  })*/\n\n  /*useEffect(() => {\n    console.log(props.cookies)\n    if(props.cookies.isLogged === 'true'){\n      props.handleLoging('true');\n    }\n    else if(props.cookies.isLogged === 'false'){\n        props.handleLoging('false');\n    }\n  })*/\n\n  useEffect(() => {\n    if(props.cookies.username !== null && props.cookies.username !== undefined){\n      console.log(\"isLogged à true\")\n      var updatedCookies = props.cookies;\n      updatedCookies.isLogged = 'true';\n      setCookies(updatedCookies);\n    }\n    else{\n      setIsLogged(props.cookies.isLogged);\n    }\n  }, [props.cookies, username])\n\n  useEffect(() => {\n    if(cookies === null){\n      var updatedCookies = new Object(); // changer ca pour le faire a la fin du setcookies\n      updatedCookies.isLogged = 'false';\n      setCookies(updatedCookies);\n    }\n    else{\n      setIsLogged(props.cookies.isLogged);\n    }\n  }, [cookies])\n  function login(){\n    fetch(\"https://lauriari-arvr.azurewebsites.net/auth/login\",{\n      method:'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ username: username,\n      password: password })\n    }).then((response) => \n      response.json()\n    )\n    .then((data) => \n      cblogin(data)\n    )\n    .catch((error) => {\n      wrongLogin(error);\n    })\n    props.handleLoging('Loading');\n  }\n\n  function register(u, p){\n    username = u;\n    password = p;\n    fetch(\"https://lauriari-arvr.azurewebsites.net/auth/register\",{\n      method:'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ username: u,\n      password: p,\n      contentManager: 1})\n    }).then((response) => {\n      login();\n    })\n  }\n\n  function disconnect(){\n    props.handleCookie('false', 'token');\n    props.handleCookie('false', 'username')\n    props.handleCookie('true', 'isLogged', 'false', {path:'/'})\n    setIsLogged('false');\n    //setCookies(null); // probleme de synchro ici \n    //setLogged('false');\n  }\n\n  function cblogin(data){\n    props.handleCookie('true', 'token', data.message, {path:'/'});\n    props.handleCookie('true', 'username', username, {path:'/'});\n    props.handleCookie('true', 'isLogged', 'true', {path:'/'});\n    setIsLogged(\"true\");\n    //setLogged('true');\n  }\n\n  function wrongLogin(error){\n    showModal(\"Sign-In-Modal-Error\");\n  }\n\n  console.log(\"isLogged = \" + isLogged)\n  if(isLogged === 'true'){\n      return(\n        <>\n        <nav class=\"navbar bg-dark\">\n          <div class=\"left-buttons d-flex justify-content-start\">\n          <a class=\"navbar-brand\" style={{width:\"8%\", margin: \"0\"}}href=\"#\"><img src=\"/logo.jpg\" alt=\"\" width=\"100%\" class=\"d-inline-block align-text-top\"></img></a>\n            <div class=\"link p-2 bd-highlight\">\n              <button onClick={() => props.handlePage('home')} class=\"btn btn-link nav-link active text-light fs-5\">Home</button>\n            </div>\n            <div class=\"link p-2 bd-highlight\">\n              <button  onClick={() => props.handlePage('workspace')}class=\"btn btn-link nav-link text-light fs-5\">My Workspace</button>\n            </div>\n          </div>\n          <div className=\"right-buttons d-flex justify-content-end\">\n            <button className=\"btn btn-primary\" onClick={disconnect}>{cookies.username}</button>\n          </div>\n        </nav>\n        </>\n      )\n  }\n    else if(isLogged === 'false'){\n      return (\n        <>\n          <nav class=\"navbar bg-dark\">\n            <div class=\"left-buttons d-flex justify-content-start\">\n            <div class=\"link p-2 bd-highlight\">\n              <button  onClick={() => props.handlePage('home')} class=\"btn btn-link nav-link active text-light fs-5\">\n                <img src=\"./public/logo.jpg\" alt=\"\" ></img>\n              </button>\n            </div>\n              <div class=\"link p-2 bd-highlight\">\n                <button  onClick={() => props.handlePage('home')} class=\"btn btn-link nav-link active text-light fs-5\">Home</button>\n              </div>\n              <div class=\"link p-2 bd-highlight\">\n                <button  onClick={() => props.handlePage('workspace')}class=\"btn btn-link nav-link text-light fs-5\">My Workspace</button>\n              </div>\n            </div>\n            <div className=\"right-buttons d-flex justify-content-end\">\n              <div className=\"p-2 bd-highlight\">\n                <button class=\"btn btn-outline-light\" onClick={() => showModal('Sign-In-Modal')}>Login</button>\n              </div>\n              <div className=\"p-2 bd-highlight\">\n                <button class=\"btn btn-warning\" onClick={() => showModal('Sign-Up-Modal')}>Sign-Up</button>\n              </div>\n            </div>\n          </nav>\n          <SignUpModal handleRegistration={register}></SignUpModal>\n          <div class=\"modal fade\" id=\"Sign-In-Modal\" aria-hidden=\"true\" aria-labelledby=\"exampleModalToggleLabel\" tabindex=\"-1\">\n            <div class=\"modal-dialog modal-dialog-centered\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h5 class=\"modal-title\" id=\"exampleModalToggleLabel\">Login to your account</h5>\n                  <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                <div class=\"input-group mb-3\">\n                  <span class=\"input-group-text\" id=\"basic-addon1\">@</span>\n                  <input type=\"text\" class=\"form-control\" onChange={(e) => username = e.target.value} placeholder=\"Username\" aria-label=\"Username\" aria-describedby=\"basic-addon1\"></input>\n                </div>\n                <div class=\"input-group mb-3\">\n                  <span class=\"input-group-text\" id=\"basic-addon1\">Password</span>\n                  <input type=\"password\" class=\"form-control\" onChange={(e) => password = e.target.value} placeholder=\"Password\" aria-label=\"Username\" aria-describedby=\"basic-addon1\"></input>\n                </div>\n                  <div className=\"d-flex justify-content-center\">\n                    <button type=\"submit\" class=\"btn btn-primary justify-content-center\" data-bs-dismiss=\"modal\" onClick={() => login(\"Sign-In-Modal\")}>Sign-In</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal fade\" id=\"Sign-In-Modal-Error\" aria-hidden=\"true\" aria-labelledby=\"exampleModalToggleLabel\" tabindex=\"-1\">\n          <div class=\"modal-dialog modal-dialog-centered\">\n            <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\" id=\"exampleModalToggleLabel\">Login to your account</h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n              <div class=\"modal-body\">\n              <div class=\"input-group mb-3\">\n                <span class=\"input-group-text\" id=\"basic-addon1\">Username</span>\n                <input type=\"text\" class=\"form-control is-invalid\" onChange={(e) => username = e.target.value} id=\"validationServerUsername\" aria-describedby=\"inputGroupPrepend3 validationServerUsernameFeedback\" required></input>\n                <div id=\"validationServerUsernameFeedback\" class=\"invalid-feedback\">\n                  Enter your username again.\n                </div>\n              </div>\n              <div class=\"input-group mb-3\">\n                <span class=\"input-group-text\" id=\"basic-addon1\">Password</span>\n                <input type=\"password\" class=\"form-control is-invalid\" onChange={(e) => password = e.target.value} id=\"validationServerUsername\" aria-describedby=\"inputGroupPrepend3 validationServerUsernameFeedback\" required></input>\n                <div id=\"validationServerUsernameFeedback\" class=\"invalid-feedback\">\n                  Enter your password again.\n                </div>\n              </div>\n                <div className=\"d-flex justify-content-center\">\n                  <button type=\"submit\" class=\"btn btn-primary justify-content-center\" data-bs-dismiss=\"modal\" onClick={() => login(\"Sign-In-Modal\")}>Sign-In</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        </>    \n      );\n    }\n  else{\n    setIsLogged('false');\n    return (\n      <>\n        <nav class=\"navbar bg-dark\">\n          <div class=\"left-buttons d-flex justify-content-start\">\n            <div class=\"link p-2 bd-highlight\">\n              <button  onClick={() => props.handlePage('home')} class=\"btn btn-link nav-link active text-light fs-5\">\n                <img src=\"./public/logo.jpg\" alt=\"\" ></img>\n              </button>\n            </div>\n            <div class=\"link p-2 bd-highlight\">\n              <button  onClick={() => props.handlePage('home')} class=\"btn btn-link nav-link active text-light fs-5\">Home</button>\n            </div>\n            <div class=\"link p-2 bd-highlight\">\n              <button  onClick={() => props.handlePage('workspace')}class=\"btn btn-link nav-link text-light fs-5\">My Workspace</button>\n            </div>\n          </div>\n          <div className=\"right-buttons d-flex justify-content-end\">\n            <div class=\"spinner-border text-light\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n        </nav>\n        </>\n      \n    );\n\n    \n  }\n} ;\n\nfunction closeModal(modal){\n  var myModal = new bootstrap.Modal(document.getElementById(modal), {\n    keyboard: false\n  });\n  myModal.modal('hide');\n};\n\nfunction showModal(modal){\n  var myModal = new bootstrap.Modal(document.getElementById(modal), {\n    keyboard: false\n  });\n  myModal.show();\n}\n\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}