{"ast":null,"code":"var _jsxFileName = \"/Users/arnaudavocatgros/Documents/GitHub/AR_VR_Map_WebSite/src/ItemViewer.js\";\n// copier coller code iss tracker\nimport * as THREE from \"../node_modules/three/build/three.js\";\nimport { GLTFLoader } from '../node_modules/three/examples/jsm/loaders/GLTFLoader.js';\nimport { RoughnessMipmapper } from '../node_modules/three/examples/jsm/utils/RoughnessMipmapper.js';\nimport Stats from './Stats';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { OrbitControls } from \"../node_modules/three/examples/jsm/controls/OrbitControls\";\nimport { Object3D } from \"three\";\nimport { useEffect, useRef, useState } from \"react\";\nexport default function ItemViewer(props) {\n  const mountRef = useRef(null);\n  const [pos, setPos] = useState(false);\n  useEffect(() => {\n    console.log(props.ref);\n    let pointclouds;\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xffffff);\n    scene.add(new THREE.AxesHelper(5));\n    const raycaster = new THREE.Raycaster();\n    const mouse = new THREE.Vector2();\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.z = 20;\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setSize(window.innerWidth * 0.3, window.innerHeight * 0.3);\n    mountRef.current.appendChild(renderer.domElement);\n    console.log(mountRef.current.getBoundingClientRect());\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    const loader = new GLTFLoader();\n    loader.load(\"https://lauriaristorage.blob.core.windows.net/\" + props.link, function (gltf) {\n      gltf.scene.name = \"gltf\";\n      var box = new THREE.Box3().setFromObject(gltf.scene);\n      console.log(box.min, box.max);\n      scene.add(gltf.scene);\n    }, xhr => {\n      console.log(xhr.loaded / xhr.total * 100 + '% loaded');\n    }, error => {\n      console.log(error);\n    });\n    const mgeo = new THREE.SphereGeometry(1, 1);\n    const mmat = new THREE.MeshStandardMaterial({\n      color: 0xFFFFFF\n    });\n    const moon = new THREE.Mesh(mgeo, mmat);\n    moon.name = \"intersection\";\n    const pointLight = new THREE.PointLight(0xFFFFFF);\n    pointLight.position.set(0, 0, 0);\n    const ambientLight = new THREE.AmbientLight(0xFFFFFF);\n    ambientLight.intensity = 3;\n    scene.add(ambientLight);\n    window.addEventListener('resize', onWindowResize, false);\n\n    function onWindowResize() {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth * 0.3, window.innerHeight * 0.3);\n      render();\n    }\n\n    window.addEventListener('pointermove', onMouseMove);\n\n    function onMouseMove(event) {\n      let posDiv = mountRef.current.getBoundingClientRect();\n\n      if (event.clientX > posDiv.x && event.clientX < posDiv.x + posDiv.width && event.clientY > posDiv.y && event.clientY < posDiv.y + posDiv.height) {\n        mouse.x = (event.clientX - posDiv.x) / posDiv.width * 2 - 1;\n        mouse.y = -((event.clientY - posDiv.y) / posDiv.height) * 2 + 1;\n        console.log(\"inside !!\");\n      }\n    }\n\n    const stats = Stats();\n    document.body.appendChild(stats.dom);\n\n    function animate() {\n      requestAnimationFrame(animate);\n      controls.update();\n      render();\n      stats.update();\n    }\n\n    function render() {\n      raycaster.setFromCamera(mouse, camera); // calculate objects intersecting the picking ray\n\n      const point = new Object3D();\n      const intersects = raycaster.intersectObjects(scene.children);\n\n      for (let i = 0; i < intersects.length; i++) {\n        // You can do anything you want here, this is just an example to make the hovered object transparent\n        //console.log(intersects[i].object.parent.name); \n        const newMaterial = intersects[i].object.material.clone();\n        newMaterial.transparent = false;\n        newMaterial.opacity = 0.5;\n        intersects[i].object.material = newMaterial;\n\n        if (i === 2) {\n          x = intersects[2].point.x;\n          y = intersects[2].point.y;\n          z = intersects[2].point.z;\n        }\n      }\n\n      window.addEventListener(\"click\", onClick, false);\n\n      function onClick(event) {\n        if (props.click !== undefined) {\n          let posDiv = mountRef.current.getBoundingClientRect();\n\n          if (event.clientX > posDiv.x && event.clientX < posDiv.x + posDiv.width && event.clientY > posDiv.y && event.clientY < posDiv.y + posDiv.height) {\n            console.log(moon.position);\n            let position = moon.position;\n            props.click(position.x, position.y, position.z);\n          }\n        }\n      }\n\n      moon.position.set(x, y, z);\n      scene.add(moon);\n      renderer.render(scene, camera);\n    }\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    function onWindowResize() {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      render();\n    }\n\n    console.log(scene);\n    animate();\n    return () => mountRef.current.removeChild(renderer.domElement);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: mountRef,\n    style: {\n      cursor: \"none\"\n    },\n    id: \"3d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  });\n} //580","map":{"version":3,"sources":["/Users/arnaudavocatgros/Documents/GitHub/AR_VR_Map_WebSite/src/ItemViewer.js"],"names":["THREE","GLTFLoader","RoughnessMipmapper","Stats","React","Component","ReactDOM","OrbitControls","Object3D","useEffect","useRef","useState","ItemViewer","props","mountRef","pos","setPos","console","log","ref","pointclouds","scene","Scene","background","Color","add","AxesHelper","raycaster","Raycaster","mouse","Vector2","x","y","z","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","renderer","WebGLRenderer","setSize","current","appendChild","domElement","getBoundingClientRect","controls","enableDamping","loader","load","link","gltf","name","box","Box3","setFromObject","min","max","xhr","loaded","total","error","mgeo","SphereGeometry","mmat","MeshStandardMaterial","color","moon","Mesh","pointLight","PointLight","set","ambientLight","AmbientLight","intensity","addEventListener","onWindowResize","aspect","updateProjectionMatrix","render","onMouseMove","event","posDiv","clientX","width","clientY","height","stats","document","body","dom","animate","requestAnimationFrame","update","setFromCamera","point","intersects","intersectObjects","children","i","length","newMaterial","object","material","clone","transparent","opacity","onClick","click","undefined","removeChild","cursor"],"mappings":"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","sourcesContent":["// copier coller code iss tracker\nimport * as THREE from \"../node_modules/three/build/three.js\";\nimport {GLTFLoader} from '../node_modules/three/examples/jsm/loaders/GLTFLoader.js'\n\nimport { RoughnessMipmapper } from '../node_modules/three/examples/jsm/utils/RoughnessMipmapper.js';\nimport Stats from './Stats';\n\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {OrbitControls} from \"../node_modules/three/examples/jsm/controls/OrbitControls\"\nimport { Object3D } from \"three\";\nimport { useEffect, useRef, useState } from \"react\";\n\n\nexport default function ItemViewer(props){\n    const mountRef = useRef(null);\n    const [pos, setPos] = useState(false);\n\n    useEffect(() => {\n        console.log(props.ref)\n    let pointclouds;\nconst scene = new THREE.Scene()\nscene.background = new THREE.Color( 0xffffff );\nscene.add(new THREE.AxesHelper(5))\nconst raycaster = new THREE.Raycaster();\nconst mouse = new THREE.Vector2();\nlet x = 0\nlet y = 0;\nlet z = 0;\n\nconst camera = new THREE.PerspectiveCamera(\n    75,\n    (window.innerWidth) / (window.innerHeight),\n    0.1,\n    1000\n)\ncamera.position.z = 20\nconst renderer = new THREE.WebGLRenderer()\nrenderer.setSize(window.innerWidth *0.3, window.innerHeight * 0.3)\nmountRef.current.appendChild( renderer.domElement );\nconsole.log(mountRef.current.getBoundingClientRect());\nconst controls = new OrbitControls(camera, renderer.domElement)\ncontrols.enableDamping = true\n\n    \nconst loader = new GLTFLoader()\nloader.load(\n    \"https://lauriaristorage.blob.core.windows.net/\" + props.link,\n    function (gltf) {\n        gltf.scene.name = \"gltf\"\n        var box = new THREE.Box3().setFromObject(gltf.scene);\n        console.log(box.min, box.max);\n        scene.add(gltf.scene)\n    },\n    (xhr) => {\n        console.log((xhr.loaded / xhr.total) * 100 + '% loaded')\n    },\n    (error) => {\n        console.log(error)\n    }\n)\nconst mgeo = new THREE.SphereGeometry(1,1);\n  const mmat = new THREE.MeshStandardMaterial({color: 0xFFFFFF});\n  const moon = new THREE.Mesh(mgeo,mmat);\n  moon.name = \"intersection\";\nconst pointLight = new THREE.PointLight(0xFFFFFF);\n    pointLight.position.set(0,0,0);\n    const ambientLight = new THREE.AmbientLight(0xFFFFFF);\n    ambientLight.intensity = 3;\n    scene.add( ambientLight)\nwindow.addEventListener('resize', onWindowResize, false)\nfunction onWindowResize() {\n    camera.aspect = window.innerWidth  / (window.innerHeight)\n    camera.updateProjectionMatrix()\n    renderer.setSize(window.innerWidth *0.3, window.innerHeight*0.3)\n    render()\n}\nwindow.addEventListener('pointermove', onMouseMove);\n\nfunction onMouseMove(event){\n    let posDiv = mountRef.current.getBoundingClientRect();\n    if(event.clientX > posDiv.x && event.clientX < posDiv.x + posDiv.width && event.clientY > posDiv.y && event.clientY < posDiv.y + posDiv.height){\n        mouse.x = ( (event.clientX - posDiv.x) / posDiv.width ) * 2 - 1;\n        mouse.y = - (( event.clientY - posDiv.y) / posDiv.height ) * 2 + 1;\n        console.log(\"inside !!\")\n    }\n  \n}\nconst stats = Stats()\ndocument.body.appendChild(stats.dom)\n\nfunction animate() {\n    requestAnimationFrame(animate)\n\n    controls.update()\n\n    render()\n\n    stats.update()\n}\n\nfunction render() {\n  raycaster.setFromCamera( mouse, camera);\n\n\t// calculate objects intersecting the picking ray\n\n\n  const point = new Object3D();\n  const intersects = raycaster.intersectObjects( scene.children );\n  for (let i = 0; i < intersects.length; i++) {\n    // You can do anything you want here, this is just an example to make the hovered object transparent\n    //console.log(intersects[i].object.parent.name); \n    const newMaterial = intersects[i].object.material.clone();\n    newMaterial.transparent = false;\n    newMaterial.opacity = 0.5;\n    intersects[i].object.material = newMaterial;\n    if(i === 2){\n      x = intersects[2].point.x;\n      y = intersects[2].point.y;\n      z = intersects[2].point.z;\n    }\n     \n\n   \n    \n  }\n\n  window.addEventListener(\"click\", onClick, false);\n\n  function onClick(event){\n      if(props.click !== undefined){\n        let posDiv = mountRef.current.getBoundingClientRect();\n        if(event.clientX > posDiv.x && event.clientX < posDiv.x + posDiv.width && event.clientY > posDiv.y && event.clientY < posDiv.y + posDiv.height){\n          console.log(moon.position);\n          let position = moon.position;\n          props.click(position.x, position.y, position.z);\n        }\n      }\n    \n  }\n  \n  \nmoon.position.set(x,y,z);\n  scene.add(moon);\n    renderer.render(scene, camera)\n}\n\nwindow.addEventListener('resize', onWindowResize, false)\nfunction onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight\n    camera.updateProjectionMatrix()\n    renderer.setSize(window.innerWidth, window.innerHeight)\n    render()\n}\n\n\nconsole.log(scene);\nanimate()\n\nreturn () => mountRef.current.removeChild( renderer.domElement);\n    }, [])\n    \n    \n\n    return (\n        <div ref={mountRef} style={{cursor: \"none\"}}id=\"3d\">\n        </div>\n    )\n  \n}\n\n//580"]},"metadata":{},"sourceType":"module"}